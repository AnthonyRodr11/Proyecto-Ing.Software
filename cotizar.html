<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotización</title>
    <link rel="stylesheet" href="estilos/cotizar.css">
</head>
<body>
    <div class="container">
        <header>
            <nav class="menu">
                <ul>
                    <li><img src="img/logo.png" alt="Logo" class="logo"></li>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="cotizar.html" class="active">Cotizar</a></li>
                    <li><a href="agenda.html">Agendar</a></li>
                    <li><a href="inventario.html">Inventario</a></li>
                    <li><a href="colaboradores.html">Colaboradores</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <h1>Cotización</h1>
            <div class="contenedor">
                <form id="cotizarForm">
                    <button type="button" class="accordion">Datos del Cliente</button>
                    <div class="panel">
                        <label for="nombreCliente">Nombre del Cliente:</label>
                        <input type="text" id="nombreCliente" placeholder="Escriba el nombre">

                        <label for="numeroCliente">Número celular del Cliente:</label>
                        <input type="text" id="numeroCliente" placeholder="Escriba el número">
                    </div>

                    <button type="button" class="accordion">Detalles del Trabajo</button>
                    <div class="panel">
                        <label for="tiposTrabajos">Tipo de Trabajo:</label>
                        <select id="tiposTrabajos">
                            <option value="Acarreo">Acarreo</option>
                            <option value="Wincheo">Wincheo</option>
                            <option value="Mudanza Internas">Mudanza Internas</option>
                        </select>

                        <label for="ubiPartida">Punto de partida:</label>
                        <input type="text" id="ubiPartida">

                        <label for="ubiLlegada">Punto de llegada:</label>
                        <input type="text" id="ubiLlegada">

                        <label for="descripcion">Descripción del Trabajo:</label>
                        <textarea id="descripcion" placeholder="Escriba la descripción del servicio" rows="5" cols="50" required style="resize: none;"></textarea>. 

                    </div>

                    <button type="button" class="accordion">Servicios</button>
                    <div class="panel">
                        <label for="montaCarga">Monta Carga</label>
                        <input type="checkbox" id="montaCarga">
                        
                        <label for="material">Sogas y cintas adhesivas</label>
                        <input type="checkbox" id="material">
                        
                        <label for="polea">Poleas</label>
                        <input type="checkbox" id="polea">
                        
                        <label for="materialEmbalaje">Material de embalaje</label>
                        <input type="checkbox" id="materialEmbalaje">
                    </div>

                    <input type="button" value="Guardar Cotización" onclick="guardarSolicitud()">
                </form>
            </div>
        </main>
    </div>

    <script>
        // Efecto acordeón
        const acc = document.getElementsByClassName("accordion");
        for (let i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                const panel = this.nextElementSibling;
                if (panel.style.display === "block") {
                    panel.style.display = "none";
                } else {
                    panel.style.display = "block";
                }
            });
        }

        // Función para guardar y mostrar modal
        function guardarSolicitud() {
            const cliente = document.getElementById("nombreCliente").value;
            const numero = document.getElementById("numeroCliente").value;

            const checkboxes = ["montaCarga", "material", "polea", "materialEmbalaje"];
            const serviciosSeleccionados = checkboxes
                .filter(id => document.getElementById(id).checked)
                .map(id => {
                    const label = document.querySelector(`label[for="${id}"]`);
                    return label ? label.textContent.trim() : "Desconocido";
                });

            const tipoTrabajo = document.getElementById("tiposTrabajos").value;
            const ubiPartida = document.getElementById("ubiPartida").value;
            const ubiLlegada = document.getElementById("ubiLlegada").value;
            const descripcion = document.getElementById("descripcion").value;

            mostrarModal({
                cliente,
                numero,
                serviciosSeleccionados,
                tipoTrabajo,
                ubiPartida,
                ubiLlegada,
                descripcion
            });
        }

        // Mostrar modal
        function mostrarModal(datos) {
            const modalContent = `
                <div id="modal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center;">
                    <div style="background: white; padding: 20px; border-radius: 8px; max-width: 600px; width: 90%;">
                        <h2>Información de la Cotización</h2>
                        <p><strong>Cliente:</strong> ${datos.cliente}</p>
                        <p><strong>Número de Contacto:</strong> ${datos.numero}</p>
                        <p><strong>Servicios Seleccionados:</strong> ${datos.serviciosSeleccionados.join(", ") || "Ninguno"}</p>
                        <p><strong>Tipo de Trabajo:</strong> ${datos.tipoTrabajo}</p>
                        <p><strong>Punto de Partida:</strong> ${datos.ubiPartida}</p>
                        <p><strong>Punto de Llegada:</strong> ${datos.ubiLlegada}</p>
                         <p><strong>Descripción del Servicio:</strong> ${datos.descripcion}</p>
                        <button onclick="cerrarModal()">Cerrar</button>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML("beforeend", modalContent);
        }

        // Cerrar modal
        function cerrarModal() {
            const modal = document.getElementById("modal");
            if (modal) modal.remove();
        }
    </script>
</body>
</html>
